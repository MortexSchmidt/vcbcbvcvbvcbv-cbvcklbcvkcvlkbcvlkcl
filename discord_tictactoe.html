<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Крестики-нолики — Discord Style</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Discord-like dark theme */
    :root {
      --discord-dark: #313338;
      --discord-darker: #2b2d31;
      --discord-darkest: #1e1f22;
      --discord-light: #dbdee1;
      --discord-accent: #5865f2;
      --discord-green: #23a559;
      --discord-yellow: #fee75c;
      --discord-red: #f23f43;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      background: var(--discord-darkest);
      color: var(--discord-light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
    }

    .discord-container {
      width: 100%;
      max-width: 480px;
      background: var(--discord-darker);
      border-radius: 8px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .discord-header {
      background: var(--discord-dark);
      padding: 16px 20px;
      border-bottom: 1px solid var(--discord-darkest);
    }

    .discord-header h1 {
      margin: 0;
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--discord-light);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .discord-header h1::before {
      content: '\f1e7';
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      color: var(--discord-accent);
    }

    .discord-content {
      padding: 20px;
    }

    /* Game Status */
    .status-message {
      font-size: 0.95rem;
      text-align: center;
      margin-bottom: 20px;
      padding: 12px;
      background: var(--discord-dark);
      border-radius: 6px;
      color: var(--discord-light);
    }

    .status-message.winning {
      background: var(--discord-green);
      color: white;
    }

    .status-message.waiting {
      background: var(--discord-yellow);
      color: #000;
    }

    .status-message.error {
      background: var(--discord-red);
      color: white;
    }

    /* Game Board */
    .game-board {
      padding: 14px;
      background: var(--discord-dark);
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .board-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
    }

    .cell {
      background: var(--discord-darker);
      border-radius: 6px;
      min-height: calc((100vw - 48px) / 3);
      height: auto;
      font-size: calc(1.6rem + (100vw - 320px) / 300);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
      border: 2px solid transparent;
      color: var(--discord-light);
      font-weight: 600;
    }

    .cell:hover {
      background: var(--discord-accent);
      border-color: var(--discord-light);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);
    }

    .cell.x {
      color: var(--discord-green);
      background: rgba(35, 165, 89, 0.1);
    }

    .cell.o {
      color: var(--discord-yellow);
      background: rgba(254, 231, 92, 0.1);
    }

    .cell.taken {
      cursor: not-allowed;
      opacity: 0.6;
    }

    .cell.taken:hover {
      background: var(--discord-darker);
      border-color: transparent;
      transform: none;
      box-shadow: none;
    }

    /* Lobby Section */
    .lobby-section {
      background: var(--discord-dark);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .lobby-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 16px;
      text-align: center;
      color: var(--discord-light);
    }

    .players-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .player-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 16px;
      background: var(--discord-darker);
      border-radius: 6px;
      min-width: 100px;
    }

    .player-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--discord-accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .player-name {
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--discord-light);
      text-align: center;
    }

    .player-symbol {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--discord-accent);
    }

    .lobby-status {
      text-align: center;
      color: var(--discord-light);
      opacity: 0.8;
      margin-bottom: 16px;
    }

    /* Buttons */
    .discord-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .discord-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 100px;
    }

    .discord-btn.primary {
      background: var(--discord-accent);
      color: white;
    }

    .discord-btn.primary:hover {
      background: #4752c4;
      transform: translateY(-1px);
    }

    .discord-btn.secondary {
      background: var(--discord-darkest);
      color: var(--discord-light);
      border: 1px solid var(--discord-light);
    }

    .discord-btn.secondary:hover {
      background: var(--discord-light);
      color: var(--discord-darkest);
    }

    .discord-btn.danger {
      background: var(--discord-red);
      color: white;
    }

    .discord-btn.danger:hover {
      background: #d73843;
      transform: translateY(-1px);
    }

    /* Responsive */
    @media (max-width: 600px) {
      .discord-container {
        max-width: 100%;
        border-radius: 0;
      }

      body {
        padding: 0;
      }

      .discord-content {
        padding: 16px;
      }

      .board-grid {
        gap: 6px;
      }

      .cell {
        font-size: calc(1.4rem + (100vw - 320px) / 400);
      }
    }

    /* Animation for winning cells */
    .cell.win {
      animation: winPulse 0.6s ease-in-out;
    }

    @keyframes winPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
  </style>
</head>
<body>
  <div class="discord-container">
    <div class="discord-header">
      <h1>Крестики-нолики</h1>
    </div>

    <div class="discord-content">
      <!-- Lobby Section -->
      <div id="lobbySection" class="lobby-section">
        <div class="lobby-title">Ожидание игроков</div>

        <div class="players-container">
          <div class="player-card">
            <div class="player-avatar" id="player1Avatar">?</div>
            <div class="player-name" id="player1Name">Игрок 1</div>
            <div class="player-symbol" id="player1Symbol">X</div>
          </div>

          <div class="player-card">
            <div class="player-avatar" id="player2Avatar">?</div>
            <div class="player-name" id="player2Name">Игрок 2</div>
            <div class="player-symbol" id="player2Symbol">O</div>
          </div>
        </div>

        <div class="lobby-status" id="lobbyStatus">
          Нажмите "Начать игру" чтобы начать
        </div>

        <div class="discord-buttons">
          <button class="discord-btn primary" onclick="startGame()">Начать игру</button>
          <button class="discord-btn secondary" onclick="resetGame()">Сбросить</button>
        </div>
      </div>

      <!-- Game Section (initially hidden) -->
      <div id="gameSection" style="display: none;">
        <div class="status-message" id="gameStatus">
          Ход игрока X
        </div>

        <div class="game-board">
          <div class="board-grid" id="gameBoard">
            <div class="cell" data-index="0" onclick="makeMove(0)"></div>
            <div class="cell" data-index="1" onclick="makeMove(1)"></div>
            <div class="cell" data-index="2" onclick="makeMove(2)"></div>
            <div class="cell" data-index="3" onclick="makeMove(3)"></div>
            <div class="cell" data-index="4" onclick="makeMove(4)"></div>
            <div class="cell" data-index="5" onclick="makeMove(5)"></div>
            <div class="cell" data-index="6" onclick="makeMove(6)"></div>
            <div class="cell" data-index="7" onclick="makeMove(7)"></div>
            <div class="cell" data-index="8" onclick="makeMove(8)"></div>
          </div>
        </div>

        <div class="discord-buttons">
          <button class="discord-btn primary" onclick="startNewGame()">Новая игра</button>
          <button class="discord-btn secondary" onclick="backToLobby()">В лобби</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Game state
    let currentPlayer = 'X';
    let gameActive = false;
    let gameState = ['', '', '', '', '', '', '', '', ''];
    let player1Name = 'Игрок 1';
    let player2Name = 'Игрок 2';

    // Winning conditions
    const winningConditions = [
      [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
      [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
      [0, 4, 8], [2, 4, 6] // Diagonals
    ];

    function startGame() {
      // Generate random names for demo
      player1Name = getRandomName();
      player2Name = getRandomName();

      document.getElementById('player1Name').textContent = player1Name;
      document.getElementById('player2Name').textContent = player2Name;

      // Show game section
      document.getElementById('lobbySection').style.display = 'none';
      document.getElementById('gameSection').style.display = 'block';

      // Reset game state
      resetGameState();
      gameActive = true;

      // Update status
      document.getElementById('gameStatus').textContent = `Ход игрока ${currentPlayer} (${currentPlayer === 'X' ? player1Name : player2Name})`;
      document.getElementById('gameStatus').className = 'status-message';
    }

    function resetGameState() {
      gameState = ['', '', '', '', '', '', '', '', ''];
      currentPlayer = 'X';
      const cells = document.querySelectorAll('.cell');
      cells.forEach(cell => {
        cell.textContent = '';
        cell.className = 'cell';
      });
    }

    function makeMove(index) {
      if (!gameActive || gameState[index] !== '') return;

      gameState[index] = currentPlayer;
      document.querySelector(`[data-index="${index}"]`).textContent = currentPlayer;

      // Check for win
      if (checkWin()) {
        gameActive = false;
        highlightWinningCells();
        document.getElementById('gameStatus').textContent = `Игрок ${currentPlayer} победил!`;
        document.getElementById('gameStatus').className = 'status-message winning';
        return;
      }

      // Check for draw
      if (checkDraw()) {
        gameActive = false;
        document.getElementById('gameStatus').textContent = 'Ничья!';
        document.getElementById('gameStatus').className = 'status-message';
        return;
      }

      // Switch player
      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
      document.getElementById('gameStatus').textContent = `Ход игрока ${currentPlayer} (${currentPlayer === 'X' ? player1Name : player2Name})`;
    }

    function checkWin() {
      return winningConditions.some(condition => {
        return condition.every(index => gameState[index] === currentPlayer);
      });
    }

    function checkDraw() {
      return gameState.every(cell => cell !== '');
    }

    function highlightWinningCells() {
      winningConditions.forEach(condition => {
        if (condition.every(index => gameState[index] === currentPlayer)) {
          condition.forEach(index => {
            document.querySelector(`[data-index="${index}"]`).classList.add('win');
          });
        }
      });
    }

    function startNewGame() {
      resetGameState();
      gameActive = true;
      currentPlayer = 'X';
      document.getElementById('gameStatus').textContent = `Ход игрока ${currentPlayer} (${currentPlayer === 'X' ? player1Name : player2Name})`;
      document.getElementById('gameStatus').className = 'status-message';
    }

    function backToLobby() {
      document.getElementById('lobbySection').style.display = 'block';
      document.getElementById('gameSection').style.display = 'none';
      gameActive = false;
      document.getElementById('lobbyStatus').textContent = 'Игра завершена';
    }

    function resetGame() {
      resetGameState();
      gameActive = false;
      document.getElementById('lobbyStatus').textContent = 'Игра сброшена';
    }

    function getRandomName() {
      const names = ['Алексей', 'Мария', 'Дмитрий', 'Анна', 'Сергей', 'Елена', 'Андрей', 'Ольга', 'Максим', 'Татьяна'];
      return names[Math.floor(Math.random() * names.length)];
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      resetGameState();
    });
  </script>
</body>
</html>